
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://anuran-roy.github.io/pymetrix/">
      
      <link rel="icon" href="images/pymetrix-logo.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.4">
    
    
      
        <title>Pymetrix</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.bb3983ee.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pymetrix" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Pymetrix" class="md-header__button md-logo" aria-label="Pymetrix" data-md-component="logo">
      
  <img src="images/pymetrix-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pymetrix
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/anuran-roy/pymetrix-python/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    anuran-roy/pymetrix-python
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Pymetrix" class="md-nav__button md-logo" aria-label="Pymetrix" data-md-component="logo">
      
  <img src="images/pymetrix-logo.png" alt="logo">

    </a>
    Pymetrix
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/anuran-roy/pymetrix-python/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    anuran-roy/pymetrix-python
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Home
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use-it" class="md-nav__link">
    How to use it
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-with-various-web-frameworks" class="md-nav__link">
    Using with various Web Frameworks
  </a>
  
    <nav class="md-nav" aria-label="Using with various Web Frameworks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-using-with-django" class="md-nav__link">
    1. Using with Django
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-using-with-fastapi" class="md-nav__link">
    2. Using with FastAPI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-using-with-starlite" class="md-nav__link">
    3. Using with Starlite
  </a>
  
    <nav class="md-nav" aria-label="3. Using with Starlite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#orjson-note" class="md-nav__link">
    Orjson Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" data-md-state="indeterminate" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="api/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" data-md-state="indeterminate" type="checkbox" id="__nav_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Developer Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer Docs" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Developer Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_1" data-md-state="indeterminate" type="checkbox" id="__nav_2_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2_1">
          Metrics API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Metrics API" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Metrics API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="api/metrics-api/usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_2" data-md-state="indeterminate" type="checkbox" id="__nav_2_2_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2_2">
          Flow API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Flow API" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_2">
          <span class="md-nav__icon md-icon"></span>
          Flow API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="api/flow-api/endpoints/" class="md-nav__link">
        Endpoints API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="under-construction/" class="md-nav__link">
        FlowNode API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="under-construction/" class="md-nav__link">
        FlowLayer API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="under-construction/" class="md-nav__link">
        FlowGraph API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="api/notes/" class="md-nav__link">
        Notes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use-it" class="md-nav__link">
    How to use it
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-with-various-web-frameworks" class="md-nav__link">
    Using with various Web Frameworks
  </a>
  
    <nav class="md-nav" aria-label="Using with various Web Frameworks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-using-with-django" class="md-nav__link">
    1. Using with Django
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-using-with-fastapi" class="md-nav__link">
    2. Using with FastAPI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-using-with-starlite" class="md-nav__link">
    3. Using with Starlite
  </a>
  
    <nav class="md-nav" aria-label="3. Using with Starlite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#orjson-note" class="md-nav__link">
    Orjson Note
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/anuran-roy/pymetrix-python/edit/master/docs/index.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<!-- # Welcome to MkDocs

For full documentation visit [mkdocs.org](https://www.mkdocs.org).

## Commands

* `mkdocs new [dir-name]` - Create a new project.
* `mkdocs serve` - Start the live-reloading docs server.
* `mkdocs build` - Build the documentation site.
* `mkdocs -h` - Print help message and exit.

## Project layout

    mkdocs.yml    # The configuration file.
    docs/
        index.md  # The documentation homepage.
        ...       # Other markdown pages, images and other files. -->

<h1 id="pymetrix">Pymetrix</h1>
<p><img alt="Pymetrix Logo" src="images/pymetrix.png" /></p>
<p><a href="https://anuran-roy.github.io/tags/pymetrix/"><img alt="Docs" src="https://img.shields.io/website?color=whi&amp;down_color=red&amp;down_message=Offline&amp;label=Docs&amp;logo=readthedocs&amp;logoColor=white&amp;style=for-the-badge&amp;up_color=green&amp;up_message=Online&amp;url=https%3A%2F%2Fanuran-roy.github.io%2Ftags%2Fpymetrix%2F" /></a></p>
<h2 id="introduction">Introduction:</h2>
<p><strong>Pymetrix</strong> (previously known as <strong>Analyx</strong>) is a plug-and-play analytics library written in Python. It aims to be lightweight and effective at capturing most of the basic metrics for your website, with the possibility of adding more through the use of extensions.</p>
<h2 id="how-to-use-it">How to use it</h2>
<p>Pymetrix is really easy to integrate with your projects. Here's an example:</p>
<p>Let's say you want to monitor a method <code>foo()</code> defined as:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="__codelineno-0-3"></a><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="__codelineno-0-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello world </span><span class="si">{</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000000</span><span class="p">)</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
</code></pre></div>
<p>After adding the required lines, the code will look something like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="__codelineno-1-2"></a><span class="kn">from</span> <span class="nn">pymetrix.metrics</span> <span class="kn">import</span> <span class="n">Metrics</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="__codelineno-1-4"></a><span class="n">metricman</span> <span class="o">=</span> <span class="n">Metrics</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="vm">__file__</span><span class="p">)</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="__codelineno-1-5"></a><span class="n">foo_obj</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="__codelineno-1-7"></a><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="__codelineno-1-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello world </span><span class="si">{</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000000</span><span class="p">)</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="__codelineno-1-9"></a>    <span class="k">if</span> <span class="n">foo_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="__codelineno-1-10"></a>        <span class="n">ep1</span> <span class="o">=</span> <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">foo</span><span class="p">)</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="__codelineno-1-11"></a>        <span class="n">foo_obj</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span><span class="n">ep1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Object1&quot;</span><span class="p">)</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="__codelineno-1-13"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">foo_obj</span><span class="p">,</span> <span class="n">layerName</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="using-with-various-web-frameworks">Using with various Web Frameworks</h2>
<p>Pymetrix can be used in conjunction with other frameworks as well, including web frameworks. The following examples will illustrate it more clearly.</p>
<h3 id="1-using-with-django">1. Using with Django</h3>
<p><strong><a href="https://www.djangoproject.com/">Django</a></strong> is the most popular framework of choice for a vast majority of Python web developers, often dubbed as "the framework for perfectionists with deadlines". It is a clean, concise and opinionated framework that enforces code reusability, modularity and code readability. It has an intuitive directory structure, and a large ecosystem of plugins tailor-made for it. Besides those, the usual Python libraries that can be used in tandem with it for designing business logic as well.</p>
<p>Being a library, you can import Pymetrix on any file that will be executed by the server on calling the endpoints. This is usually the <code>views.py</code> file in a standard Django project.</p>
<p>A sample <code>views.py</code> in Django with Pymetrix (Tested on Django 4.0.0):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="__codelineno-2-1"></a><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">HttpResponse</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="__codelineno-2-2"></a><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">StreamingHttpResponse</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="__codelineno-2-4"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">NewType</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="__codelineno-2-6"></a><span class="kn">from</span> <span class="nn">pymetrix</span> <span class="kn">import</span> <span class="n">metrics</span><span class="p">,</span> <span class="n">endpoints</span><span class="p">,</span> <span class="n">flow</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="__codelineno-2-7"></a><span class="kn">import</span> <span class="nn">pymetrix.visualize</span> <span class="k">as</span> <span class="nn">vs</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="__codelineno-2-9"></a><span class="c1"># Create your views here.</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="__codelineno-2-12"></a><span class="n">metricman</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">Metrics</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;Test&quot;</span><span class="p">)</span>  <span class="c1"># Initialize the Pymetrix Metrics object</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="__codelineno-2-15"></a><span class="k">def</span> <span class="nf">blog</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="__codelineno-2-16"></a>    <span class="c1"># Other code</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="__codelineno-2-17"></a>    <span class="o">...</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="__codelineno-2-18"></a>    <span class="n">node2</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="__codelineno-2-19"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/blog&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">blog</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Blog&quot;</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="__codelineno-2-20"></a>    <span class="p">)</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="__codelineno-2-21"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="__codelineno-2-22"></a>        <span class="n">node2</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="__codelineno-2-23"></a>    <span class="p">)</span>  <span class="c1"># Add the function to the graph corresponding to the metricman object</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="__codelineno-2-24"></a>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="__codelineno-2-25"></a>    <span class="c1"># any return stuff</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="__codelineno-2-26"></a>    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;&lt;h1&gt;Blog works!&lt;/h1&gt;&quot;</span><span class="p">)</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="__codelineno-2-27"></a>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="__codelineno-2-28"></a>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="__codelineno-2-29"></a><span class="k">def</span> <span class="nf">about</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="__codelineno-2-30"></a>    <span class="c1"># Other code</span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="__codelineno-2-31"></a>    <span class="o">...</span>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="__codelineno-2-32"></a>    <span class="n">node3</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="__codelineno-2-33"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/about&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">about</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;About&quot;</span>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="__codelineno-2-34"></a>    <span class="p">)</span>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="__codelineno-2-35"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="__codelineno-2-36"></a>        <span class="n">node3</span>
<a id="__codelineno-2-37" name="__codelineno-2-37" href="__codelineno-2-37"></a>    <span class="p">)</span>  <span class="c1"># Add the function to the graph corresponding to the metricman object</span>
<a id="__codelineno-2-38" name="__codelineno-2-38" href="__codelineno-2-38"></a>
<a id="__codelineno-2-39" name="__codelineno-2-39" href="__codelineno-2-39"></a>    <span class="c1"># any return stuff</span>
<a id="__codelineno-2-40" name="__codelineno-2-40" href="__codelineno-2-40"></a>    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;&lt;h1&gt;About works!&lt;/h1&gt;&quot;</span><span class="p">)</span>
<a id="__codelineno-2-41" name="__codelineno-2-41" href="__codelineno-2-41"></a>
<a id="__codelineno-2-42" name="__codelineno-2-42" href="__codelineno-2-42"></a>
<a id="__codelineno-2-43" name="__codelineno-2-43" href="__codelineno-2-43"></a><span class="k">def</span> <span class="nf">contact</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-2-44" name="__codelineno-2-44" href="__codelineno-2-44"></a>    <span class="c1"># Other code</span>
<a id="__codelineno-2-45" name="__codelineno-2-45" href="__codelineno-2-45"></a>    <span class="o">...</span>
<a id="__codelineno-2-46" name="__codelineno-2-46" href="__codelineno-2-46"></a>    <span class="n">node4</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-2-47" name="__codelineno-2-47" href="__codelineno-2-47"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/contact&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">contact</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Contact&quot;</span>
<a id="__codelineno-2-48" name="__codelineno-2-48" href="__codelineno-2-48"></a>    <span class="p">)</span>
<a id="__codelineno-2-49" name="__codelineno-2-49" href="__codelineno-2-49"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span>
<a id="__codelineno-2-50" name="__codelineno-2-50" href="__codelineno-2-50"></a>        <span class="n">node4</span>
<a id="__codelineno-2-51" name="__codelineno-2-51" href="__codelineno-2-51"></a>    <span class="p">)</span>  <span class="c1"># Add the function to the graph corresponding to the metricman object</span>
<a id="__codelineno-2-52" name="__codelineno-2-52" href="__codelineno-2-52"></a>
<a id="__codelineno-2-53" name="__codelineno-2-53" href="__codelineno-2-53"></a>    <span class="c1"># any return stuff</span>
<a id="__codelineno-2-54" name="__codelineno-2-54" href="__codelineno-2-54"></a>    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;&lt;h1&gt;Contact works!&lt;/h1&gt;&quot;</span><span class="p">)</span>
<a id="__codelineno-2-55" name="__codelineno-2-55" href="__codelineno-2-55"></a>
<a id="__codelineno-2-56" name="__codelineno-2-56" href="__codelineno-2-56"></a>
<a id="__codelineno-2-57" name="__codelineno-2-57" href="__codelineno-2-57"></a><span class="k">def</span> <span class="nf">collaborations</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-2-58" name="__codelineno-2-58" href="__codelineno-2-58"></a>    <span class="c1"># Other code</span>
<a id="__codelineno-2-59" name="__codelineno-2-59" href="__codelineno-2-59"></a>    <span class="o">...</span>
<a id="__codelineno-2-60" name="__codelineno-2-60" href="__codelineno-2-60"></a>    <span class="n">node6</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-2-61" name="__codelineno-2-61" href="__codelineno-2-61"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/collaborations&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">collaborations</span><span class="p">),</span>
<a id="__codelineno-2-62" name="__codelineno-2-62" href="__codelineno-2-62"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Collaborations&quot;</span><span class="p">,</span>
<a id="__codelineno-2-63" name="__codelineno-2-63" href="__codelineno-2-63"></a>    <span class="p">)</span>
<a id="__codelineno-2-64" name="__codelineno-2-64" href="__codelineno-2-64"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span>
<a id="__codelineno-2-65" name="__codelineno-2-65" href="__codelineno-2-65"></a>        <span class="n">node6</span>
<a id="__codelineno-2-66" name="__codelineno-2-66" href="__codelineno-2-66"></a>    <span class="p">)</span>  <span class="c1"># Add the function to the graph corresponding to the metricman object</span>
<a id="__codelineno-2-67" name="__codelineno-2-67" href="__codelineno-2-67"></a>
<a id="__codelineno-2-68" name="__codelineno-2-68" href="__codelineno-2-68"></a>    <span class="c1"># any return stuff</span>
<a id="__codelineno-2-69" name="__codelineno-2-69" href="__codelineno-2-69"></a>    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;&lt;h1&gt;Collaborations works!&lt;/h1&gt;&quot;</span><span class="p">)</span>
<a id="__codelineno-2-70" name="__codelineno-2-70" href="__codelineno-2-70"></a>
<a id="__codelineno-2-71" name="__codelineno-2-71" href="__codelineno-2-71"></a>
<a id="__codelineno-2-72" name="__codelineno-2-72" href="__codelineno-2-72"></a><span class="k">def</span> <span class="nf">events</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-2-73" name="__codelineno-2-73" href="__codelineno-2-73"></a>    <span class="c1"># Other code</span>
<a id="__codelineno-2-74" name="__codelineno-2-74" href="__codelineno-2-74"></a>    <span class="o">...</span>
<a id="__codelineno-2-75" name="__codelineno-2-75" href="__codelineno-2-75"></a>    <span class="n">node5</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-2-76" name="__codelineno-2-76" href="__codelineno-2-76"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/events&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">events</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Events&quot;</span>
<a id="__codelineno-2-77" name="__codelineno-2-77" href="__codelineno-2-77"></a>    <span class="p">)</span>
<a id="__codelineno-2-78" name="__codelineno-2-78" href="__codelineno-2-78"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span>
<a id="__codelineno-2-79" name="__codelineno-2-79" href="__codelineno-2-79"></a>        <span class="n">node5</span>
<a id="__codelineno-2-80" name="__codelineno-2-80" href="__codelineno-2-80"></a>    <span class="p">)</span>  <span class="c1"># Add the function to the graph corresponding to the metricman object</span>
<a id="__codelineno-2-81" name="__codelineno-2-81" href="__codelineno-2-81"></a>
<a id="__codelineno-2-82" name="__codelineno-2-82" href="__codelineno-2-82"></a>    <span class="c1"># any return stuff</span>
<a id="__codelineno-2-83" name="__codelineno-2-83" href="__codelineno-2-83"></a>    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;&lt;h1&gt;Events works!&lt;/h1&gt;&quot;</span><span class="p">)</span>
<a id="__codelineno-2-84" name="__codelineno-2-84" href="__codelineno-2-84"></a>
<a id="__codelineno-2-85" name="__codelineno-2-85" href="__codelineno-2-85"></a>
<a id="__codelineno-2-86" name="__codelineno-2-86" href="__codelineno-2-86"></a><span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-2-87" name="__codelineno-2-87" href="__codelineno-2-87"></a>    <span class="n">node1</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-2-88" name="__codelineno-2-88" href="__codelineno-2-88"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/home1&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">home</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Home&quot;</span>
<a id="__codelineno-2-89" name="__codelineno-2-89" href="__codelineno-2-89"></a>    <span class="p">)</span>
<a id="__codelineno-2-90" name="__codelineno-2-90" href="__codelineno-2-90"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span>
<a id="__codelineno-2-91" name="__codelineno-2-91" href="__codelineno-2-91"></a>        <span class="n">node1</span>
<a id="__codelineno-2-92" name="__codelineno-2-92" href="__codelineno-2-92"></a>    <span class="p">)</span>  <span class="c1"># Add the function to the graph corresponding to the metricman object</span>
<a id="__codelineno-2-93" name="__codelineno-2-93" href="__codelineno-2-93"></a>
<a id="__codelineno-2-94" name="__codelineno-2-94" href="__codelineno-2-94"></a>    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;&lt;h1&gt;Home works!&lt;/h1&gt;&quot;</span><span class="p">)</span>
<a id="__codelineno-2-95" name="__codelineno-2-95" href="__codelineno-2-95"></a>
<a id="__codelineno-2-96" name="__codelineno-2-96" href="__codelineno-2-96"></a>
<a id="__codelineno-2-97" name="__codelineno-2-97" href="__codelineno-2-97"></a><span class="c1"># The methods below won&#39;t be added for metrics</span>
<a id="__codelineno-2-98" name="__codelineno-2-98" href="__codelineno-2-98"></a>
<a id="__codelineno-2-99" name="__codelineno-2-99" href="__codelineno-2-99"></a>
<a id="__codelineno-2-100" name="__codelineno-2-100" href="__codelineno-2-100"></a><span class="k">def</span> <span class="nf">someMethod</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-2-101" name="__codelineno-2-101" href="__codelineno-2-101"></a>    <span class="o">...</span>
<a id="__codelineno-2-102" name="__codelineno-2-102" href="__codelineno-2-102"></a>
<a id="__codelineno-2-103" name="__codelineno-2-103" href="__codelineno-2-103"></a>
<a id="__codelineno-2-104" name="__codelineno-2-104" href="__codelineno-2-104"></a><span class="k">class</span> <span class="nc">someClass</span><span class="p">:</span>
<a id="__codelineno-2-105" name="__codelineno-2-105" href="__codelineno-2-105"></a>    <span class="o">...</span>
<a id="__codelineno-2-106" name="__codelineno-2-106" href="__codelineno-2-106"></a>
<a id="__codelineno-2-107" name="__codelineno-2-107" href="__codelineno-2-107"></a>
<a id="__codelineno-2-108" name="__codelineno-2-108" href="__codelineno-2-108"></a><span class="k">def</span> <span class="nf">anotherMethod</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-2-109" name="__codelineno-2-109" href="__codelineno-2-109"></a>    <span class="o">...</span>
<a id="__codelineno-2-110" name="__codelineno-2-110" href="__codelineno-2-110"></a>
<a id="__codelineno-2-111" name="__codelineno-2-111" href="__codelineno-2-111"></a>
<a id="__codelineno-2-112" name="__codelineno-2-112" href="__codelineno-2-112"></a><span class="k">def</span> <span class="nf">aThirdMethod</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-2-113" name="__codelineno-2-113" href="__codelineno-2-113"></a>    <span class="o">...</span>
</code></pre></div>
<p>Although I haven't tested it yet, owing to the nature of the <code>metricman</code> object, I think it can be used in the top level <code>urls.py</code> for being used over the entire project - one that has multiple Django Apps into it.</p>
<p>Also, do check out <strong><a href="https://github.com/anuran-roy/pymetrix-dashboard-django.git">Pymetrix Django Dashboard</a></strong></p>
<h3 id="2-using-with-fastapi">2. Using with FastAPI</h3>
<p><strong><a href="https://fastapi.tiangolo.com/">FastAPI</a></strong> is a micro web framework built on top of Pydantic and Starlette. It claims to be the fastest Pythonic web framework out there for building APIs, and adheres to the OpenAPI standards. It provides two UIs for testing the APIs made through it - Redoc and SwaggerUI. It also provides a lot of functionalities out of the box, such as asynchronous calls, which speeds up API calls, sometimes tremendously. It can be used both with ASGI and WSGI.</p>
<p>Integrating Pymetrix with FastAPI is as easy as it is in Django, if not easier.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="__codelineno-3-1"></a><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">status</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="__codelineno-3-2"></a><span class="kn">from</span> <span class="nn">pymetrix</span> <span class="kn">import</span> <span class="n">metrics</span><span class="p">,</span> <span class="n">endpoints</span><span class="p">,</span> <span class="n">flow</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="__codelineno-3-3"></a><span class="kn">from</span> <span class="nn">fastapi.responses</span> <span class="kn">import</span> <span class="n">ORJSONResponse</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="__codelineno-3-5"></a><span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="__codelineno-3-8"></a><span class="n">metricman</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">Metrics</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;Test&quot;</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="__codelineno-3-11"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/home&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">)</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="__codelineno-3-12"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">home</span><span class="p">():</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="__codelineno-3-13"></a>    <span class="n">node1</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="__codelineno-3-14"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/home&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">home</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Home&quot;</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="__codelineno-3-15"></a>    <span class="p">)</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="__codelineno-3-16"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node1</span><span class="p">)</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="__codelineno-3-17"></a>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="__codelineno-3-18"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the home page&quot;</span><span class="p">}</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="__codelineno-3-19"></a>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="__codelineno-3-20"></a>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="__codelineno-3-21"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/contact&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">)</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="__codelineno-3-22"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">contact</span><span class="p">():</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="__codelineno-3-23"></a>    <span class="n">node2</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="__codelineno-3-24"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/contact&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">contact</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Contact&quot;</span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="__codelineno-3-25"></a>    <span class="p">)</span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="__codelineno-3-26"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node2</span><span class="p">)</span>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="__codelineno-3-27"></a>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="__codelineno-3-28"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the contact page&quot;</span><span class="p">}</span>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="__codelineno-3-29"></a>
<a id="__codelineno-3-30" name="__codelineno-3-30" href="__codelineno-3-30"></a>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="__codelineno-3-31"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/collaborations&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">)</span>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="__codelineno-3-32"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">collaborations</span><span class="p">():</span>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="__codelineno-3-33"></a>    <span class="n">node3</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="__codelineno-3-34"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/collaborations&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">collaborations</span><span class="p">),</span>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="__codelineno-3-35"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Collaborations&quot;</span><span class="p">,</span>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="__codelineno-3-36"></a>    <span class="p">)</span>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="__codelineno-3-37"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node3</span><span class="p">)</span>
<a id="__codelineno-3-38" name="__codelineno-3-38" href="__codelineno-3-38"></a>
<a id="__codelineno-3-39" name="__codelineno-3-39" href="__codelineno-3-39"></a>    <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-3-40" name="__codelineno-3-40" href="__codelineno-3-40"></a>        <span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span>
<a id="__codelineno-3-41" name="__codelineno-3-41" href="__codelineno-3-41"></a>        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the collaborations page&quot;</span><span class="p">,</span>
<a id="__codelineno-3-42" name="__codelineno-3-42" href="__codelineno-3-42"></a>    <span class="p">}</span>
<a id="__codelineno-3-43" name="__codelineno-3-43" href="__codelineno-3-43"></a>
<a id="__codelineno-3-44" name="__codelineno-3-44" href="__codelineno-3-44"></a>
<a id="__codelineno-3-45" name="__codelineno-3-45" href="__codelineno-3-45"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/events&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">)</span>
<a id="__codelineno-3-46" name="__codelineno-3-46" href="__codelineno-3-46"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">events</span><span class="p">():</span>
<a id="__codelineno-3-47" name="__codelineno-3-47" href="__codelineno-3-47"></a>    <span class="n">node4</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-3-48" name="__codelineno-3-48" href="__codelineno-3-48"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/events&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">events</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Events&quot;</span>
<a id="__codelineno-3-49" name="__codelineno-3-49" href="__codelineno-3-49"></a>    <span class="p">)</span>
<a id="__codelineno-3-50" name="__codelineno-3-50" href="__codelineno-3-50"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node4</span><span class="p">)</span>
<a id="__codelineno-3-51" name="__codelineno-3-51" href="__codelineno-3-51"></a>
<a id="__codelineno-3-52" name="__codelineno-3-52" href="__codelineno-3-52"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the events page&quot;</span><span class="p">}</span>
<a id="__codelineno-3-53" name="__codelineno-3-53" href="__codelineno-3-53"></a>
<a id="__codelineno-3-54" name="__codelineno-3-54" href="__codelineno-3-54"></a>
<a id="__codelineno-3-55" name="__codelineno-3-55" href="__codelineno-3-55"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/blog&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">)</span>
<a id="__codelineno-3-56" name="__codelineno-3-56" href="__codelineno-3-56"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">blog</span><span class="p">():</span>
<a id="__codelineno-3-57" name="__codelineno-3-57" href="__codelineno-3-57"></a>    <span class="n">node5</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-3-58" name="__codelineno-3-58" href="__codelineno-3-58"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/blog&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">blog</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Blog&quot;</span>
<a id="__codelineno-3-59" name="__codelineno-3-59" href="__codelineno-3-59"></a>    <span class="p">)</span>
<a id="__codelineno-3-60" name="__codelineno-3-60" href="__codelineno-3-60"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node5</span><span class="p">)</span>
<a id="__codelineno-3-61" name="__codelineno-3-61" href="__codelineno-3-61"></a>
<a id="__codelineno-3-62" name="__codelineno-3-62" href="__codelineno-3-62"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the blog page&quot;</span><span class="p">}</span>
<a id="__codelineno-3-63" name="__codelineno-3-63" href="__codelineno-3-63"></a>
<a id="__codelineno-3-64" name="__codelineno-3-64" href="__codelineno-3-64"></a>
<a id="__codelineno-3-65" name="__codelineno-3-65" href="__codelineno-3-65"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/about&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">)</span>
<a id="__codelineno-3-66" name="__codelineno-3-66" href="__codelineno-3-66"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">about</span><span class="p">():</span>
<a id="__codelineno-3-67" name="__codelineno-3-67" href="__codelineno-3-67"></a>    <span class="n">node6</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-3-68" name="__codelineno-3-68" href="__codelineno-3-68"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;/about&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="n">about</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;About&quot;</span>
<a id="__codelineno-3-69" name="__codelineno-3-69" href="__codelineno-3-69"></a>    <span class="p">)</span>
<a id="__codelineno-3-70" name="__codelineno-3-70" href="__codelineno-3-70"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node6</span><span class="p">)</span>
<a id="__codelineno-3-71" name="__codelineno-3-71" href="__codelineno-3-71"></a>
<a id="__codelineno-3-72" name="__codelineno-3-72" href="__codelineno-3-72"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the about page&quot;</span><span class="p">}</span>
<a id="__codelineno-3-73" name="__codelineno-3-73" href="__codelineno-3-73"></a>
<a id="__codelineno-3-74" name="__codelineno-3-74" href="__codelineno-3-74"></a>
<a id="__codelineno-3-75" name="__codelineno-3-75" href="__codelineno-3-75"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/statistics&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">ORJSONResponse</span><span class="p">)</span>
<a id="__codelineno-3-76" name="__codelineno-3-76" href="__codelineno-3-76"></a><span class="k">async</span> <span class="k">def</span> <span class="nf">get_statistics</span><span class="p">():</span>
<a id="__codelineno-3-77" name="__codelineno-3-77" href="__codelineno-3-77"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">metricman</span><span class="o">.</span><span class="n">aggregate</span><span class="p">()}</span>
</code></pre></div>
<p>Now we start the <code>uvicorn</code> server using:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="__codelineno-4-1"></a>uvicorn main:app --port <span class="m">8000</span> --reload
</code></pre></div>
<p>Now going to <code>localhost:8000/statistics</code> will give you the aggregate hits on each endpoint.</p>
<p>Also, here we are serializing the data <a href="#orjson-note">using orjson, instead of regular JSON</a></p>
<p>Just like the case with Django, you can initialize a Pymetrix object in the main.py file and then import into other scripts from there, if you want a centralized view. But you're also free to take a modular approach with your project by initializing the Pymetrix objects within each module - your skills are your limit.</p>
<h3 id="3-using-with-starlite">3. Using with Starlite</h3>
<p><strong><a href="https://goldziher.github.io/starlite/">Starlite</a></strong> is the new challenger in town for Web API frameworks. It's similar to FastAPI in the aspect that it's based on Starlette and Pydantic. But it has a fundamental philosophical difference - Starlite is opinionated, while FastAPI is not. </p>
<p>According to the maker of Starlite, Na'aman Hirschfeld (who is also an online friend of mine ):</p>
<blockquote>
<p>The intention behind Starlite was to create a higher level opinionated API framework. I placed opinionated in bold because in my view, being opinionated regarding how certain things should be done and shouldnt be done, and establishing best practices, is one of the most important things a framework can do.</p>
</blockquote>
<p>So let's see how Pymetrix works with Starlite:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="__codelineno-5-1"></a><span class="kn">from</span> <span class="nn">starlite</span> <span class="kn">import</span> <span class="n">Starlite</span><span class="p">,</span> <span class="n">get</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="__codelineno-5-2"></a><span class="kn">from</span> <span class="nn">pymetrix</span> <span class="kn">import</span> <span class="n">metrics</span><span class="p">,</span> <span class="n">endpoints</span><span class="p">,</span> <span class="n">flow</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="__codelineno-5-3"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="__codelineno-5-5"></a><span class="n">metricman</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">Metrics</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;Test&quot;</span><span class="p">)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="__codelineno-5-8"></a><span class="nd">@get</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/home&quot;</span><span class="p">)</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="__codelineno-5-9"></a><span class="k">def</span> <span class="nf">home</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="__codelineno-5-10"></a>    <span class="n">node1</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="__codelineno-5-11"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;/home&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">home</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Home&quot;</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="__codelineno-5-12"></a>    <span class="p">)</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="__codelineno-5-13"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node1</span><span class="p">)</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="__codelineno-5-14"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Home Page Works&quot;</span><span class="p">}</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="__codelineno-5-17"></a><span class="nd">@get</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/contact&quot;</span><span class="p">)</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="__codelineno-5-18"></a><span class="k">def</span> <span class="nf">contact</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="__codelineno-5-19"></a>    <span class="n">node2</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="__codelineno-5-20"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;/contact&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">contact</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Contact&quot;</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="__codelineno-5-21"></a>    <span class="p">)</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="__codelineno-5-22"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node2</span><span class="p">)</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="__codelineno-5-23"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Contact Page Works&quot;</span><span class="p">}</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="__codelineno-5-24"></a>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="__codelineno-5-25"></a>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="__codelineno-5-26"></a><span class="nd">@get</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/collaborations&quot;</span><span class="p">)</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="__codelineno-5-27"></a><span class="k">def</span> <span class="nf">collaborations</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="__codelineno-5-28"></a>    <span class="n">node3</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="__codelineno-5-29"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;/collaborations&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">collaborations</span><span class="p">),</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="__codelineno-5-30"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Collaborations&quot;</span><span class="p">,</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="__codelineno-5-31"></a>    <span class="p">)</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="__codelineno-5-32"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node3</span><span class="p">)</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="__codelineno-5-33"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Collaborations Page Works&quot;</span><span class="p">}</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="__codelineno-5-34"></a>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="__codelineno-5-35"></a>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="__codelineno-5-36"></a><span class="nd">@get</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/events&quot;</span><span class="p">)</span>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="__codelineno-5-37"></a><span class="k">def</span> <span class="nf">events</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="__codelineno-5-38"></a>    <span class="n">node4</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="__codelineno-5-39"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;/events&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">events</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Events&quot;</span>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="__codelineno-5-40"></a>    <span class="p">)</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="__codelineno-5-41"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node4</span><span class="p">)</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="__codelineno-5-42"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Events Page Works&quot;</span><span class="p">}</span>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="__codelineno-5-43"></a>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="__codelineno-5-44"></a>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="__codelineno-5-45"></a><span class="nd">@get</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/blog&quot;</span><span class="p">)</span>
<a id="__codelineno-5-46" name="__codelineno-5-46" href="__codelineno-5-46"></a><span class="k">def</span> <span class="nf">blog</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="__codelineno-5-47"></a>    <span class="n">node5</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="__codelineno-5-48"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;/blog&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">blog</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Blog&quot;</span>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="__codelineno-5-49"></a>    <span class="p">)</span>
<a id="__codelineno-5-50" name="__codelineno-5-50" href="__codelineno-5-50"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node5</span><span class="p">)</span>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="__codelineno-5-51"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Blog Page Works&quot;</span><span class="p">}</span>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="__codelineno-5-52"></a>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="__codelineno-5-53"></a>
<a id="__codelineno-5-54" name="__codelineno-5-54" href="__codelineno-5-54"></a><span class="nd">@get</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/about&quot;</span><span class="p">)</span>
<a id="__codelineno-5-55" name="__codelineno-5-55" href="__codelineno-5-55"></a><span class="k">def</span> <span class="nf">about</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<a id="__codelineno-5-56" name="__codelineno-5-56" href="__codelineno-5-56"></a>    <span class="n">node6</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-5-57" name="__codelineno-5-57" href="__codelineno-5-57"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;/about&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">about</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;About&quot;</span>
<a id="__codelineno-5-58" name="__codelineno-5-58" href="__codelineno-5-58"></a>    <span class="p">)</span>
<a id="__codelineno-5-59" name="__codelineno-5-59" href="__codelineno-5-59"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node6</span><span class="p">)</span>
<a id="__codelineno-5-60" name="__codelineno-5-60" href="__codelineno-5-60"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;About Page Works&quot;</span><span class="p">}</span>
<a id="__codelineno-5-61" name="__codelineno-5-61" href="__codelineno-5-61"></a>
<a id="__codelineno-5-62" name="__codelineno-5-62" href="__codelineno-5-62"></a>
<a id="__codelineno-5-63" name="__codelineno-5-63" href="__codelineno-5-63"></a><span class="nd">@get</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/statistics&quot;</span><span class="p">)</span>
<a id="__codelineno-5-64" name="__codelineno-5-64" href="__codelineno-5-64"></a><span class="k">def</span> <span class="nf">statistics</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<a id="__codelineno-5-65" name="__codelineno-5-65" href="__codelineno-5-65"></a>    <span class="n">node2</span><span class="p">:</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNodeType</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">FlowNode</span><span class="p">(</span>
<a id="__codelineno-5-66" name="__codelineno-5-66" href="__codelineno-5-66"></a>        <span class="n">endpoints</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;/contact&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">contact</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Contact&quot;</span>
<a id="__codelineno-5-67" name="__codelineno-5-67" href="__codelineno-5-67"></a>    <span class="p">)</span>
<a id="__codelineno-5-68" name="__codelineno-5-68" href="__codelineno-5-68"></a>    <span class="n">metricman</span><span class="o">.</span><span class="n">add_to_analytics</span><span class="p">(</span><span class="n">node2</span><span class="p">)</span>
<a id="__codelineno-5-69" name="__codelineno-5-69" href="__codelineno-5-69"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">metricman</span><span class="o">.</span><span class="n">time_series</span><span class="p">()}</span>
<a id="__codelineno-5-70" name="__codelineno-5-70" href="__codelineno-5-70"></a>
<a id="__codelineno-5-71" name="__codelineno-5-71" href="__codelineno-5-71"></a>
<a id="__codelineno-5-72" name="__codelineno-5-72" href="__codelineno-5-72"></a><span class="n">app</span> <span class="o">=</span> <span class="n">Starlite</span><span class="p">(</span>
<a id="__codelineno-5-73" name="__codelineno-5-73" href="__codelineno-5-73"></a>    <span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">home</span><span class="p">,</span> <span class="n">contact</span><span class="p">,</span> <span class="n">collaborations</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="n">blog</span><span class="p">,</span> <span class="n">about</span><span class="p">,</span> <span class="n">statistics</span><span class="p">]</span>
<a id="__codelineno-5-74" name="__codelineno-5-74" href="__codelineno-5-74"></a><span class="p">)</span>
</code></pre></div>
<p>Do note that Starlite uses the orjson library for its responses by default.</p>
<h4 id="orjson-note">Orjson Note</h4>
<p>In <strong><a href="https://pypi.org/project/orjson/">orjson</a></strong>, the response is a JSON byte string and not a object. This dramatically speeds up the serialization process.</p>
<!-- For looking into what more Pymetrix can do, head to ``tests/flow_test.py``. -->

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
      
        
        <a href="api/overview/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tracking", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.tabs.link"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.361d90f1.min.js"}</script>
    
    
      <script src="assets/javascripts/bundle.289a2a4b.min.js"></script>
      
    
  </body>
</html>